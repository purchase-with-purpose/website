---
import { getCollection } from "astro:content";
import { List } from "@/templates/List";

export async function getStaticPaths() {
  const array = await getCollection("categories");
  const software = await getCollection("software");

  return array.map(({ id, data }) => {
    const items = software
      .filter((item) => item.data.category === id)
      .map((x) => x.data);

    return {
      params: { id },
      props: {
        data: { category: data, items },
      },
    };
  });
}

const props = Astro.props.data;
---

<html>
  <head><title>{props.category.label}</title></head>

  <body>
    <List items={props.items} category={props.category} client:load />
  </body>
</html>
